# Application Configuration
spring.application.name=crm-backend
server.port=8080

# Database Configuration
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/crm_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:crm_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:crm_password}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.pool-name=CRM-HikariPool

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration
spring.flyway.enabled=${FLYWAY_ENABLED:true}
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1
spring.flyway.locations=classpath:db/migration

# Logging
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO
logging.level.com.crm=DEBUG

# Server Configuration
# Hide implementation details in production
server.error.include-message=never
server.error.include-binding-errors=never

# Email Configuration - IMAP (Receiving)
email.imap.host=${EMAIL_IMAP_HOST:mail.q-prospect.pl}
email.imap.port=${EMAIL_IMAP_PORT:993}
email.imap.username=${EMAIL_USERNAME}
email.imap.password=${EMAIL_PASSWORD}
email.imap.protocol=imaps
email.imap.ssl.enable=true
# Removed insecure trust all SSL

# Email Configuration - SMTP (Sending)
spring.mail.host=${EMAIL_SMTP_HOST:mail.q-prospect.pl}
spring.mail.port=${EMAIL_SMTP_PORT:587}
spring.mail.username=${EMAIL_USERNAME}
spring.mail.password=${EMAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=${EMAIL_SMTP_HOST:mail.q-prospect.pl}
spring.mail.from=${EMAIL_FROM:crm@qprospect.pl}

# Email Fetching Configuration
email.fetch.enabled=${EMAIL_FETCH_ENABLED:true}
email.fetch.interval=300000
email.fetch.folder=INBOX

# AI Configuration (Z.AI GLM-4.6)
ai.classification.enabled=${AI_ENABLED:true}
ai.api.url=${AI_API_URL:https://api.z.ai/api/coding/paas/v4/chat/completions}
ai.api.key=${AI_API_KEY}
ai.model=${AI_MODEL:glm-4.6}

# App Configuration
app.base-url=${APP_BASE_URL:http://localhost:8080}

# Woodpecker API Configuration
woodpecker.api.base-url=${WOODPECKER_API_URL:https://api.woodpecker.co/rest}
woodpecker.api.key=${WOODPECKER_API_KEY}
woodpecker.api.enabled=${WOODPECKER_ENABLED:true}

# JWT Configuration
app.jwt-expiration-milliseconds=2592000000
app.jwt-secret=${JWT_SECRET}

# Cache Configuration (Caffeine)
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=600s